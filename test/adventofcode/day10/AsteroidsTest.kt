package adventofcode.day10

import org.junit.jupiter.api.Test
import kotlin.math.atan
import kotlin.test.assertEquals

internal class AsteroidsTest {
    @Test
    fun `sample 1`() {
        val scan = """
            .#..#
            .....
            #####
            ....#
            ...##
        """.toScan()

        assertEquals(8, scan.nrOfDetectableAsteroidsFromBestLocation())
    }

    @Test
    fun calc() {
        val l = Line(start = Coordinate(x = 1, y = 0), end = Coordinate(x = 4, y = 3))
        val p = Coordinate(x = 3, y = 2)
        val lp = l.start.lineTo(p)
        assertEquals(0.7853981633974483, atan(l.height / l.width))
        assertEquals(0.7853981633974483, atan(lp.height / lp.width))
    }

    @Test
    fun `part 1`() {
        val scan = """
            #.#................#..............#......#......
            .......##..#..#....#.#.....##...#.........#.#...
            .#...............#....#.##......................
            ......#..####.........#....#.......#..#.....#...
            .....#............#......#................#.#...
            ....##...#.#.#.#.............#..#.#.......#.....
            ..#.#.........#....#..#.#.........####..........
            ....#...#.#...####..#..#..#.....#...............
            .............#......#..........#...........#....
            ......#.#.........#...............#.............
            ..#......#..#.....##...##.....#....#.#......#...
            ...#.......##.........#.#..#......#........#.#..
            #.............#..........#....#.#.....#.........
            #......#.#................#.......#..#.#........
            #..#.#.....#.....###..#.................#..#....
            ...............................#..........#.....
            ###.#.....#.....#.............#.......#....#....
            .#.....#.........#.....#....#...................
            ........#....................#..#...............
            .....#...#.##......#............#......#.....#..
            ..#..#..............#..#..#.##........#.........
            ..#.#...#.......#....##...#........#...#.#....#.
            .....#.#..####...........#.##....#....#......#..
            .....#..#..##...............................#...
            .#....#..#......#.#............#........##...#..
            .......#.....................#..#....#.....#....
            #......#..###...........#.#....#......#.........
            ..............#..#.#...#.......#..#.#...#......#
            .......#...........#.....#...#.............#.#..
            ..##..##.............#........#........#........
            ......#.............##..#.........#...#.#.#.....
            #........#.........#...#.....#................#.
            ...#.#...........#.....#.........#......##......
            ..#..#...........#..........#...................
            .........#..#.......................#.#.........
            ......#.#.#.....#...........#...............#...
            ......#.##...........#....#............#........
            #...........##.#.#........##...........##.......
            ......#....#..#.......#.....#.#.......#.##......
            .#....#......#..............#.......#...........
            ......##.#..........#..................#........
            ......##.##...#..#........#............#........
            ..#.....#.................###...#.....###.#..#..
            ....##...............#....#..................#..
            .....#................#.#.#.......#..........#..
            #........................#.##..........#....##..
            .#.........#.#.#...#...#....#........#..#.......
            ...#..#.#......................#...............#
        """.toScan()

        val bestLocation = scan.nrOfDetectableAsteroidsFromBestLocation()
        assertEquals(309, bestLocation)
    }
}
